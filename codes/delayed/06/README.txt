https://ss64.com/nt/delayedexpansion.html

d:\work\batch_work\ModernBatchFiles\codes\delayed\06>testprj.bat
[Old] is now [New]
[Old] is now [New]
[Old] is now [New]